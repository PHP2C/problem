# 索引


## 什么是索引

```text
个人感觉索引就是用一种数据结构来组织数据，并排序，方便查找。
```

## 为什么要索引
```text
为了提高数据的查找的效率。因为数据库不只是存储数据，查找的比重占更多

TODO 在这里展示有无索引的区别，EXPLAIN
```

## 索引分类
1. 主键索引
2. 唯一索引
3. 普通索引
4. 全文索引
...

### 主键索引
```text
主键索引也是唯一索引，用来组织数据。然后InnoDB的表引擎会根据主键索引来对数据建立索引。
至于数据在InnoDB下的组织方式，后面再看
```

### 唯一索引
```text
跟他的名字一样，就是这个列下面的数据，不能重复。 可以对一个或者多个字段唯一索引。比如身份证，手机号之类。
```

### 普通索引
```text
给某些列建立索引，加快搜索速度。
```

### 全文索引
```text
这个东西用的比较少，可以配合 mysql 的 ngram分词分词工具来使用
```

## 索引方式
1. B-tree
2. Hash   没用过，不讲

# B+树

## 为什么要用B+树

### 对比二叉树，二叉平衡树，以及B树，B+树 
二叉树，主键递增的话，会变成链表。
二叉平衡树会根据大小排序。但是层级很高。

#### 数据结构可视化工具
https://www.cs.usfca.edu/~galles/visualization/BTree.html

### 为什么会选择B+树作为组织数据的数据结构呢
B+树的特点
1. 有序   
2. 一个节点先可以有多个子节点
3. 子节点冗余了父节点
4. 一个节点有多个元素
5. 子节点中都有双向指针



### 为什么不能建太多索引
因为索引的存储需要空间，更新数据库的时候，也需要更新索引
会把索引load进内存进行查找

## MYISAM
非聚簇索引
看看数据在磁盘中的存储方式 .MYD . MYI 。数据和索引分开放
索引下面存的地址
如果sql查询走索引的话，先在 .MYI 中定位到要查找数据的地址，并在 .MYD中查找
![非聚簇索引](./img/img_1.png)
上图

## InnoDB
聚簇索引
数据和索引放在一起的
主键索引 img_2
![主键索引](./img/img_2.png)
非主键索引 img_3 非主键索引下面存的是主键
![非主键索引](./img/img_3.png)
